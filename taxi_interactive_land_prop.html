<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>D3 Interactions & Transitions</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <style>

    /* Add CSS classes for tooltip and tooltip.hidden */
    /* YOUR CODE HERE */

     #tooltip.hidden {
   			 display: none;
   		 }

     #tooltip {
          position: absolute;
          width: 150px;
          height: 55px;
          padding: 5px;
          background-color: white;
          border: solid white 1px;
          z-index:10;
          opacity: 0.7;
          font-family: "Nunito, sans-serif";
        }
     	/* Add CSS classes for p to make the font-size 12 px */

      p {
        font-family: 'Nunito', sans-serif;
        font-size: 16px;
        color:#222222;
        font-weight:300;
        line-height: 1.5;
        text-align: justify;
        text-justify:inter-word;
      }

      .button {
      background-color: lightgrey; /* Green */
      border: none;
      color: white;
      padding: 12px 24px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
    }


 	</style>
</head>

<body>

	<!-- Add a div element for tooltip -->
	<div id="tooltip" class="hidden">
 		<p><span id="value">100</span></p>
  </div>



	<!-- Add buttons for each of the four neighborhoods -->
	<div style="padding:30px;">
		<input type="button" class="button" id="t1" value="Type 1">
		<input type="button" class="button" id="t2" value="Type 2">
		<input type="button" class="button" id="t3" value="Type 3">
		<input type="button" class="button" id="t4" value="Type 4">
    <input type="button" class="button" id="t5" value="Type 5">

    <p style = 'line-height: 1.2;'><span>Type1: Tracts with more taxi pick-ups in the morning and more drop-offs in the evening. </span></p>
    <p style = 'line-height: 1.2;'><span>Type2: Tracts with more taxi pick-ups both in the morning and evening. </span></p>
    <p style = 'line-height: 1.2;'><span>Type3: Tracts with more taxi drop-offs both in the morning and evening. </span></p>
    <p style = 'line-height: 1.2;'><span>Type4: Tracts with more taxi drop-offs in the morning and more pick-ups in the evening. </span></p>
    <p style = 'line-height: 1.2;'><span>Type5: Tracts with an equilibrium taxi trips . </span></p>
	</div>

	<div id="main">
	</div>


<script type="text/javascript">

// VALUE 01
// DESCRIPTION One & Two Family Buildings
// VALUE 02
// DESCRIPTION Multi - Family Walk- Up Buldings
// VALUE 03
// DESCRIPTION Multi - Family Elevator Buildings
// VALUE 04
// DESCRIPTION Mixed Residential and Commercial Buildings
// VALUE 05
// DESCRIPTION Commercial and Office Buildings
// VALUE 06
// DESCRIPTION Industrial and Manufacturing
// VALUE 07
// DESCRIPTION Transportation and Utility
// VALUE 08
// DESCRIPTION Public Facilities and Institutions
// VALUE 09
// DESCRIPTION Open Space and Outdoor Recreation
// VALUE 10
// DESCRIPTION Parking Facilities
// VALUE 11
// DESCRIPTION Vacant Land

  // 0: # more pick-up in the morning and more drop-off in the eve
  // 1: # both more pickups in mor and eve
  // 2: # both more drop-offs in mor and eve
  // 3: # more drop-off in the morning and more pick-up in the eve
  // 4: # equilibrium


	var t1 = [["Residential_buildings", 35.98], ["Commercial_and_mixed", 20.18], ["Industrial_and_Manufacturing", 8.09],["Transportation_and_Utility", 12.70], ["Public_Facilities_and_Institutions", 6.81], ["Open_Space_and_Outdoor_Recreation", 14.05], ["Vacant_Land", 2.20]]
	var t2 = [["Residential_buildings", 19.59], ["Commercial_and_mixed", 8.34],  ["Industrial_and_Manufacturing", 1.76],["Transportation_and_Utility", 50.99], ["Public_Facilities_and_Institutions", 4.14], ["Open_Space_and_Outdoor_Recreation", 13.64], ["Vacant_Land", 1.55]]
	var t3 = [["Residential_buildings", 43.98], ["Commercial_and_mixed", 13.09], ["Industrial_and_Manufacturing", 8.33],["Transportation_and_Utility", 18.24], ["Public_Facilities_and_Institutions", 6.82], ["Open_Space_and_Outdoor_Recreation", 6.51],  ["Vacant_Land", 3.03]]
	var t4 = [["Residential_buildings", 26.72], ["Commercial_and_mixed", 42.16],  ["Industrial_and_Manufacturing", 2.93],["Transportation_and_Utility", 9.16], ["Public_Facilities_and_Institutions", 9.05], ["Open_Space_and_Outdoor_Recreation", 6.83],  ["Vacant_Land", 3.15]]
  var t5 = [["Residential_buildings", 25.57], ["Commercial_and_mixed", 23.11],  ["Industrial_and_Manufacturing", 4.8],["Transportation_and_Utility", 13.65], ["Public_Facilities_and_Institutions", 13.43], ["Open_Space_and_Outdoor_Recreation", 14.29], ["Vacant_Land", 4.16]]


	// Define height and width variables (height of 720, width of 1200)


  	var height = 820;
  	var width = 1300;
  	var barWidth = 20;
  	var h_spacing = 20;


  	// Add an SVG element

  	var svg = d3.select("div#main")
  				.append("svg")
     			.attr("width", width)
     			.attr("height", height);


  	// Bind data to rectangles to create the bar chart. Add mouseovers for the hovers.

  	// Initialize data and neighborhood name wirth roslindale
  	var data = t2;
  	var pattern_name = "t2";

  	svg.selectAll("rect")
  		   	.data(data)
  		   	.enter()
  		   	.append("rect")

  		   	.attr("x", function(d, i) {return 50 + i*(barWidth+10) +h_spacing;
  									})
  		   	.attr( "y", d => 500-(d[1]*9))
  		   	.attr("width", barWidth)
  		   	.attr( "height", d => (d[1]*9)) // Set height of rectangle to data value
  		   	.attr( "fill", "#3caea3")
  		   	.on("mouseover", function(d) {
  		   					 d3.select("#tooltip")
  		   					 .style("left", d3.event.pageX + "px")
  		   					 .style("top", d3.event.pageY + "px")
  		   					 .select("#value")
  		   					 .html("<a>" + d[0] +": "+ String(d[1]) +"% "+"</a>")
  		   			 d3.select("#tooltip").classed("hidden", false);
  		   			 })

  		   			 .on("mouseout", function() {
  		   				 d3.select("#tooltip").classed("hidden", true);
  		   			 });


  // Create y-axis
  svg.append("line")
  	.attr("x1", 50)
  	.attr("y1", 50)
  	.attr("x2", 50)
  	.attr("y2", 500)
  	.attr("stroke-width", 1.5)
  	.attr("stroke", "grey")
  	.attr("opacity", .5);

  // Create x-axis
  svg.append("line")
  	.attr("x1", 50)
  	.attr("y1", 500)
  	.attr("x2", 430)
  	.attr("y2", 500)
  	.attr("stroke-width", 1.5)
  	.attr("stroke", "grey")
  	.attr("opacity", .5);

    // Add a Label
    // y-axis label
    svg.append("text")
  	.attr("class", "y label")
  	.attr("text-anchor", "end")
  	.text("Land Use Proportions")
  	.attr("transform", "translate(40, 200) rotate(-90)");

    //x-axis label
    svg.selectAll(".text")
    	 .data(data)
    	 .enter()
    	 .append("text")
    	 .attr("y", function(d, i) {return 50 + i*(barWidth+10) +h_spacing/2;
  							})
    	 .attr("x", -40)
    	 .attr("dy", ".75em")
    	 .attr("text-anchor", "end")
    	 .attr("class", "label")
    	 .text(function(d) {return d[0].replaceAll("_", " ");})
    	 .attr("transform", "translate(15, 470) rotate(-90)");




      //  // Add a map of Boston next to the bar chart and set the fill color to "gray"
     	// var bosNeighborhoods='https://github.com/yanchaomcp/11.154-Big-Data-Final-Project/blob/master/taxi_type_labels.json'
      //
     	// var albersProjection = d3.geoAlbers()
     	// .scale(14000)
     	// .rotate([73.9, 0])
     	// .center([0,43.7])
     	// .translate([width/2, height/2])
      //
     	// var geoPath = d3.geoPath()
     	// 	.projection(albersProjection)
      //
     	// var promises = [
     	//                 d3.json(bosNeighborhoods)
     	//                     ]
      //
      //
     	// Promise.all(promises).then(ready)
      //
     	// tooltip = d3.select("body")
     	//       .append("div")
     	//       .style("position", "absolute")
     	//       .style("z-index", "1")
     	//       .style("visibility", "hidden")
     	//       .style("background","white")
     	//       .style("opacity","0.6")
     	//       .style("padding","5px")
     	//       .style("font-family", "' Nunito', sans-serif")
     	//       .style("font-size", "12px");
      //
      //
      //
      //
      //
     	// //Click buttons to update data for visualization
     	//function ready() {
      //    //console.log(bosNeighbor.objects.boston_neigh)
      //
      //
      //    svg.append("g")
      //       .selectAll("path")
      //       .data(topojson.feature(bosNeighbor, bosNeighbor.objects.label).features)
      //       .enter().append("path")
      //       .attr("fill", function(d) {
      //           if ("t" + String(d.properties.label)  == pattern_name)
      //           		return "#3caea3"
      //           	else
      //           		return "gray";
      //           })
      //
     	// 	.attr("d", geoPath)
     	// 	.attr("transform", "translate(100,0)")
      //
      //
         // Bar plot for selected data:
        function bar_plot(data){
     		svg.selectAll("rect")
     		.data(data)
     		.transition().duration(2000)
     		.attr( "height", function(d) {
     			return d[1]*9;
     			})
     		.attr( "y", function(d) {
     			return 500 - (d[1]*9)
     			})
     	}
      //
     	// // Map plot for selected data:
     	// function map_plot(data){
     	// 	svg.selectAll("path")
     	// 		.data(topojson.feature(bosNeighbor, bosNeighbor.objects.label).features)
     	// 		.transition().transition().duration(1000)
     	// 		.attr("fill", function(d) {
     	// 			if ("t" + String(d.properties.label) == pattern_name)
     	// 				return "#3caea3"
     	// 			else
     	//            		return "gray";})
     	// }
      //

     	// Click to update data and neighborhood name and then execute plot to update viz:
     	d3.select("input#t1")
     		.on("click", function() {
     			data = t1
     			pattern_name = "t1"
     			bar_plot(data)
     			//map_plot(data)
     		})

         d3.select("input#t2")
     		.on("click", function() {
     			data = t2
     			pattern_name = "t2"
     			bar_plot(data)
     			//map_plot(data)
     		})

     	d3.select("input#t3")
     		.on("click", function() {
     			data = t3
     			pattern_name = "t3"
     			bar_plot(data)
     			//map_plot(data)
     		})

     	d3.select("input#t4")
     		.on("click", function() {
     			data = t4
     			pattern_name = "t4"
     			bar_plot(data)
     			//map_plot(data)
     		})

      d3.select("input#t5")
     		.on("click", function() {
     			data = t5
     			pattern_name = "t5"
     			bar_plot(data)
     			//map_plot(data)
     		})

    //  }
</script>
</body>
</html>
